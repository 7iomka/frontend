

<!DOCTYPE html>
<html lang="en-gb" dir="ltr">
  <head>
    <link rel="dns-prefetch" href="//fonts.googleapis.com"/>
    <link rel="dns-prefetch" href="//themes.googleusercontent.com"/>
    <link rel="dns-prefetch" href="//cloud.24ways.org"/>
    <link rel="dns-prefetch" href="//media.24ways.org"/>

    <script>
      // Flag support for JS
      document.documentElement.className += ' js';
      if (document.querySelector && window.addEventListener) {
        document.documentElement.className += ' js-enhanced';
        var enhanced = true;
      } else {
        var enhanced = false;
      }

      // // Add a script element as a child of the body
      // function downloadJSAtOnload() {
      //   var element = document.createElement("script");
      //   element.src = "//24ways.org/_assets/js/scripts_v37.js";
      //   document.body.appendChild(element);
      // }
      //
      // // Check for browser support of event handling capability
      // if (window.addEventListener) {
      //   window.addEventListener("load", downloadJSAtOnload, false);
      // } else if (window.attachEvent) {
      //   window.attachEvent("onload", downloadJSAtOnload);
      // } else {
      //   window.onload = downloadJSAtOnload;
      // }
    </script>

    <link rel="stylesheet" href="../../assets/styles/app.css"/>
    <link rel="alternate" type="application/rss+xml" href="http://feeds.feedburner.com/24ways"/>
    <link rel="icon" type="image/x-icon" href="../../assets/icons/favicon.ico"/>
    <link rel="apple-touch-icon-precomposed" href="../../assets/icons/apple-touch-icon.png"/>
    <link rel="author" href="/humans.txt"/>

    <meta charset="utf-8"/>
    <meta name="robots" content="index, follow"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="application-name" content=""/>
    <meta name="apple-mobile-web-app-title" content=""/>
    <meta name="twitter:site" content="@"/>
    <meta name="twitter:title" content=""/>
    <meta name="twitter:description" content=""/>
    <meta name="twitter:creator" content="@"/>
    <meta name="twitter:card" content="summary"/>

    <title>Starting Your <abbr>HTML5</abbr> Project on the Right Foot (and Keeping It There) &#9670; 24 ways</title>
  </head>

  <body class="year-2013">
    <header class="c-banner" id="top">
  <h1 class="c-banner__logo"><a href="/pages/" rel="home">24 ways <span>to impress your friends</span></a></h1>
</header>

<a class="c-menu" href="#menu">
  <span class="c-menu__icon"><svg width="48" height="48" viewBox="0 0 240 240">
  <path d="M180 75V65H60v10h120zm0 25V90H60v10h120zm0 25v-10H60v10h120zm0 25v-10H60v10h120zm0 25v-10H60v10h120z"/>
</svg>
</span>
  <span class="c-menu__label">Jump to menu</span>
</a>


<main class="c-main" role="main">

<article class="article h-entry day-01">
  <header class="article_header">
    <h1 class="article_title p-name">Starting Your <abbr>HTML5</abbr> Project on the Right Foot (and Keeping It There)</h1>
    <p class="article_byline p-author h-card">
      <a class="u-url" href="#author">
        <span class="c-avatar">
  <img class="u-photo" src="https://cloud.24ways.org/authors/drewmclellan280.jpg" width="160" height="160" alt=""/>
</span>

        <span class="p-name">Drew McLellan</span>
      </a>
    <p>
  </header>

  <footer class="article_footer">
    <ul class="list">
      <li class="list_item"><time class="dt-published" datetime="2012-12-01T00:00:00-00:00">1 Dec<span>ember</span> 2012</time></li>
      <li class="list_item">Published in <a href="/pages/topics/topicname/">Code</a></li>
      <li class="list_item"><a href="#comments">8 comments</a></li>
    </ul>
  </footer>

  <div class="article_main e-content">
    <div class="c-note">
  <p><strong>A note from the editors:</strong> While brilliant for its time, this article no longer reflects modern best practices.</p>
</div>

    
<p>Video is a bigger part of the web experience than ever before. With native browser support for <abbr title="Hyper Text Markup Language 5">HTML5</abbr> video elements freeing us from the tyranny of plugins, and the availability of faster internet connections to the workplace, home and mobile networks, it’s now pretty straightforward to publish video in a way that can be consumed in all sorts of ways on all sorts of different web devices.</p>
<p>I recently worked on a project where the client had shot some dedicated video shorts to publish on their site. They also had some five-second motion graphics produced to top and tail the videos with context and branding. This pretty common requirement is a great idea on the web, where a user might land at your video having followed a link and be viewing a page without much context.</p>
<blockquote>
<p>[I]t appears probable that the progenitors of man, either the males or females or both sexes, before acquiring the power of expressing their mutual love in articulate language, endeavoured to charm each other with musical notes and rhythm.</p>
<footer>—Charles <span class="caps">DARWIN</span>, <cite>The Descent of Man, and Selection in Relation to Sex</cite>, 1871</footer>
</blockquote>
<p>Known as <em>bumpers</em>, these short introduction clips help brand a video and make it look a lot more professional.</p>
<figure>
  <img src="http://media.24ways.org/2013/baxter/indexcards.jpg" alt="Index cards">
  <figcaption>Index cards represent each feature the rental property software would launch with.</figcaption>
</figure>
<h2>Adding bumpers to a video</h2>
<p>The simplest way to add bumpers to a video would be to edit them on to the start and end of the video file itself. Cooking the bumpers into the video file is easy, but should you ever want to update them it can become a real headache. If the branding needs updating, for example, you’d need to re-edit and re-encode all your videos. Not a fun task.</p>
<p>What if the bumpers could be added dynamically? That would enable you to use the same bumper for multiple videos (decreasing download time for users who might watch more than one) and to update the bumpers whenever you wanted. You could change them seasonally, update them for special promotions, run different advertising slots, perform multivariate testing, or even target different bumpers to different users.</p>
<blockquote>
<p>The responsive projects I’ve worked on have had a lot of success combining design and development into one hybrid phase, bringing the two teams into one highly collaborative group.</p>
<p>A lot of success combining design and development into one hybrid phase, bringing the two teams into one highly collaborative group.</p>
<p><cite><a href="http://markdotto.com/2011/09/20/good-design-is-constant-contact/">Mark Otto</a></cite></p>
</blockquote>
<p>The trade-off, of course, is that if you dynamically add your bumpers, there’s a chance that a user in a given circumstance might not see the bumper. For example, if the main video feature was uploaded to YouTube, you’d have no way to control the playback. As always, you need to weigh up the pros and cons and make your choice.</p>
<h2><abbr title="Hyper Text Markup Language 5">HTML5</abbr> bumpers</h2>
<p>If you wanted to dynamically add bumpers to your <abbr title="Hyper Text Markup Language 5">HTML5</abbr> video, how would you go about it? That was the question I found myself needing to answer for this particular client project.</p>
<p>My initial thought was to treat it just like an image slideshow. If I were building a slideshow that moved between images, I’d use <abbr title="Cascading Style Sheets">CSS</abbr> absolute positioning with <code>z-index</code> to stack the images up on top of each other in a pile, with the first image on top. To transition to the second image, I’d use JavaScript to fade the top image out, revealing the second image beneath it.</p>
<figure>
  <img src="http://media.24ways.org/2012/mclellan/stack.png" alt="Video layers stacked up" />
</figure>
<p>Now that video is just a native object in the <span class="caps">DOM</span>, just like an image, why not do the same? Stack the videos up with the opening bumper on top, listen for the video’s <code>onended</code> event, and fade it out to reveal the main feature behind. Good idea, right?</p>
<h3>Wrong</h3>
<p>Remember that this is the web. It’s never going to be that easy. The problem here is that many non-desktop devices use native, dedicated video players. Think about watching a video on a mobile phone – when you play the video, the phone often goes full-screen in its native player, leaving the web page behind. There’s no opportunity to fade or switch <code>z-index</code>, as the video isn’t being viewed in the page. Your page is left powerless. Powerless!</p>
<figure>
  <img src="http://media.24ways.org/2012/mclellan/media-player.jpg" alt="iOS full-screen media player" />
</figure>
<p>So what can we do? What can we control?</p>
<hr />
<h3>Right</h3>
<p>Those of us with particularly long memories might recall a time before <abbr title="Cascading Style Sheets">CSS</abbr>, when we’d have to use JavaScript to perform image rollovers. As <abbr title="Cascading Style Sheets">CSS</abbr> background images weren’t a practical reality, we would use lots of <code>&lt;img&gt;</code> elements, and perform a rollover by modifying the <code>src</code> attribute of the image.</p>
<p>Turns out, this old trick of modifying the source can help us out with video, too. In most cases, modifying the <code>src</code> attribute of a <code>&lt;video&gt;</code> element, or perhaps more likely the <code>src</code> attribute of a <code>source</code> element, will swap from one video to another.</p>
<h2>Swappin’ it</h2>
<p>Let’s take a deliberately simple example of a super-basic video tag:</p>
<pre><code class="language-html"><span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>video</span> <span class="token attr-name" >src</span><span class="token attr-value" ><span class="token punctuation" >=</span><span class="token punctuation" >"</span>mycat.webm<span class="token punctuation" >"</span></span> <span class="token attr-name" >controls</span><span class="token punctuation" >></span></span>no fallback coz i is lame, innit.<span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>video</span><span class="token punctuation" >></span></span>
</code></pre>
<p>We could very simply write a script to find all video tags and give them a new <code>src</code> to show our bumper.</p>
<pre><code class="language-html"><span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>script</span><span class="token punctuation" >></span></span><span class="token script language-javascript" >
  <span class="token keyword keyword-var" >var</span> videos<span class="token punctuation" >,</span> i<span class="token punctuation" >,</span> l<span class="token punctuation" >;</span>
  videos <span class="token operator" >=</span> document<span class="token punctuation" >.</span><span class="token function" >getElementsByTagName</span><span class="token punctuation" >(</span><span class="token string" >'video'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

  <span class="token keyword keyword-for" >for</span><span class="token punctuation" >(</span>i<span class="token operator" >=</span><span class="token number" >0</span><span class="token punctuation" >,</span> l<span class="token operator" >=</span>videos<span class="token punctuation" >.</span>length<span class="token punctuation" >;</span> i<span class="token operator" >&lt;</span>l<span class="token punctuation" >;</span> i<span class="token operator" >++</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    videos<span class="token punctuation" >[</span>i<span class="token punctuation" >]</span><span class="token punctuation" >.</span><span class="token function" >setAttribute</span><span class="token punctuation" >(</span><span class="token string" >'src'</span><span class="token punctuation" >,</span> <span class="token string" >'bumper-in.webm'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>
</span><span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>script</span><span class="token punctuation" >></span></span>
</code></pre>
<p><a href="http://media.24ways.org/2012/mclellan/examples/1.html">View the example</a> in a browser with WebM support. You’ll see that the video is swapped out for the opening bumper. Great!</p>
<h2>Beefing it up</h2>
<p>Of course, we can’t just publish video in one format. In practical use, you need a <code>&lt;video&gt;</code> element with multiple <code>&lt;source&gt;</code> elements containing your different source formats.</p>
<pre><code class="language-html"><span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>video</span> <span class="token attr-name" >controls</span><span class="token punctuation" >></span></span>
  <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>source</span> <span class="token attr-name" >src</span><span class="token attr-value" ><span class="token punctuation" >=</span><span class="token punctuation" >"</span>mycat.mp4<span class="token punctuation" >"</span></span> <span class="token attr-name" >type</span><span class="token attr-value" ><span class="token punctuation" >=</span><span class="token punctuation" >"</span>video/mp4<span class="token punctuation" >"</span></span> <span class="token punctuation" >/></span></span>
  <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>source</span> <span class="token attr-name" >src</span><span class="token attr-value" ><span class="token punctuation" >=</span><span class="token punctuation" >"</span>mycat.webm<span class="token punctuation" >"</span></span> <span class="token attr-name" >type</span><span class="token attr-value" ><span class="token punctuation" >=</span><span class="token punctuation" >"</span>video/webm<span class="token punctuation" >"</span></span> <span class="token punctuation" >/></span></span>
  <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>source</span> <span class="token attr-name" >src</span><span class="token attr-value" ><span class="token punctuation" >=</span><span class="token punctuation" >"</span>mycat.ogv<span class="token punctuation" >"</span></span> <span class="token attr-name" >type</span><span class="token attr-value" ><span class="token punctuation" >=</span><span class="token punctuation" >"</span>video/ogg<span class="token punctuation" >"</span></span> <span class="token punctuation" >/></span></span>
<span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>video</span><span class="token punctuation" >></span></span>
</code></pre>
<p>This time, our script needs to loop through the sources, not the videos. We’ll use a regular expression replacement to swap out the file name while maintaining the correct file extension.</p>
<pre><code class="language-html"><span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>script</span><span class="token punctuation" >></span></span><span class="token script language-javascript" >
  <span class="token keyword keyword-var" >var</span> sources<span class="token punctuation" >,</span> i<span class="token punctuation" >,</span> l<span class="token punctuation" >,</span> orig<span class="token punctuation" >;</span>
  sources <span class="token operator" >=</span> document<span class="token punctuation" >.</span><span class="token function" >getElementsByTagName</span><span class="token punctuation" >(</span><span class="token string" >'source'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

  <span class="token keyword keyword-for" >for</span><span class="token punctuation" >(</span>i<span class="token operator" >=</span><span class="token number" >0</span><span class="token punctuation" >,</span> l<span class="token operator" >=</span>sources<span class="token punctuation" >.</span>length<span class="token punctuation" >;</span> i<span class="token operator" >&lt;</span>l<span class="token punctuation" >;</span> i<span class="token operator" >++</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    orig <span class="token operator" >=</span> sources<span class="token punctuation" >[</span>i<span class="token punctuation" >]</span><span class="token punctuation" >.</span><span class="token function" >getAttribute</span><span class="token punctuation" >(</span><span class="token string" >'src'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
    sources<span class="token punctuation" >[</span>i<span class="token punctuation" >]</span><span class="token punctuation" >.</span><span class="token function" >setAttribute</span><span class="token punctuation" >(</span><span class="token string" >'src'</span><span class="token punctuation" >,</span> orig<span class="token punctuation" >.</span><span class="token function" >replace</span><span class="token punctuation" >(</span><span class="token regex" >/(w+).(w+)/</span><span class="token punctuation" >,</span> <span class="token string" >'bumper-in.$2'</span><span class="token punctuation" >)</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

    <span class="token comment" spellcheck="true">// Reload the video</span>
    sources<span class="token punctuation" >[</span>i<span class="token punctuation" >]</span><span class="token punctuation" >.</span>parentNode<span class="token punctuation" >.</span><span class="token function" >load</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>
</span><span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>script</span><span class="token punctuation" >></span></span>
</code></pre>
<p>The difference this time is that when changing the <code>src</code> of a <code>&lt;source&gt;</code> we need to call the <code>.load()</code> method on the video to get it to acknowledge the change.</p>
<p><a href="http://media.24ways.org/2012/mclellan/examples/2.html">See the code in action</a>, this time in a wider range of browsers.</p>
<h2>But, my video!</h2>
<ul>
<li>Store the original <code>src</code> in a <code>data-</code> attribute so we can access it later</li>
<li>Add an event listener so we can detect the end of the bumper playing, and load the original video back in</li>
</ul>
<p>I guess we should get the original video playing again. Keeping the same markup, we need to modify the script to do two things:</p>
<ul>
<li>Store the original <code>src</code> in a <code>data-</code> attribute so we can access it later</li>
<li>Add an event listener so we can detect the end of the bumper playing, and load the original video back in</li>
</ul>
<p>As we need to loop through the videos this time to add the event listener, I’ve moved the <code>.load()</code> call into that loop. It’s a bit more efficient to call it only once after modifying all the video’s sources.</p>
<pre><code class="language-html"><span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>script</span><span class="token punctuation" >></span></span><span class="token script language-javascript" >
  <span class="token keyword keyword-var" >var</span> videos<span class="token punctuation" >,</span> sources<span class="token punctuation" >,</span> i<span class="token punctuation" >,</span> l<span class="token punctuation" >,</span> orig<span class="token punctuation" >;</span>
  sources <span class="token operator" >=</span> document<span class="token punctuation" >.</span><span class="token function" >getElementsByTagName</span><span class="token punctuation" >(</span><span class="token string" >'source'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

  <span class="token keyword keyword-for" >for</span><span class="token punctuation" >(</span>i<span class="token operator" >=</span><span class="token number" >0</span><span class="token punctuation" >,</span> l<span class="token operator" >=</span>sources<span class="token punctuation" >.</span>length<span class="token punctuation" >;</span> i<span class="token operator" >&lt;</span>l<span class="token punctuation" >;</span> i<span class="token operator" >++</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    orig <span class="token operator" >=</span> sources<span class="token punctuation" >[</span>i<span class="token punctuation" >]</span><span class="token punctuation" >.</span><span class="token function" >getAttribute</span><span class="token punctuation" >(</span><span class="token string" >'src'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
    sources<span class="token punctuation" >[</span>i<span class="token punctuation" >]</span><span class="token punctuation" >.</span><span class="token function" >setAttribute</span><span class="token punctuation" >(</span><span class="token string" >'data-orig'</span><span class="token punctuation" >,</span> orig<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
    sources<span class="token punctuation" >[</span>i<span class="token punctuation" >]</span><span class="token punctuation" >.</span><span class="token function" >setAttribute</span><span class="token punctuation" >(</span><span class="token string" >'src'</span><span class="token punctuation" >,</span> orig<span class="token punctuation" >.</span><span class="token function" >replace</span><span class="token punctuation" >(</span><span class="token regex" >/(w+).(w+)/</span><span class="token punctuation" >,</span> <span class="token string" >'bumper-in.$2'</span><span class="token punctuation" >)</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>

  videos <span class="token operator" >=</span> document<span class="token punctuation" >.</span><span class="token function" >getElementsByTagName</span><span class="token punctuation" >(</span><span class="token string" >'video'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

  <span class="token keyword keyword-for" >for</span><span class="token punctuation" >(</span>i<span class="token operator" >=</span><span class="token number" >0</span><span class="token punctuation" >,</span> l<span class="token operator" >=</span>videos<span class="token punctuation" >.</span>length<span class="token punctuation" >;</span> i<span class="token operator" >&lt;</span>l<span class="token punctuation" >;</span> i<span class="token operator" >++</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    videos<span class="token punctuation" >[</span>i<span class="token punctuation" >]</span><span class="token punctuation" >.</span><span class="token function" >load</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
    videos<span class="token punctuation" >[</span>i<span class="token punctuation" >]</span><span class="token punctuation" >.</span><span class="token function" >addEventListener</span><span class="token punctuation" >(</span><span class="token string" >'ended'</span><span class="token punctuation" >,</span> <span class="token keyword keyword-function" >function</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >{</span>
      sources <span class="token operator" >=</span> <span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span><span class="token function" >getElementsByTagName</span><span class="token punctuation" >(</span><span class="token string" >'source'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
      <span class="token keyword keyword-for" >for</span><span class="token punctuation" >(</span>i<span class="token operator" >=</span><span class="token number" >0</span><span class="token punctuation" >,</span> l<span class="token operator" >=</span>sources<span class="token punctuation" >.</span>length<span class="token punctuation" >;</span> i<span class="token operator" >&lt;</span>l<span class="token punctuation" >;</span> i<span class="token operator" >++</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
        orig <span class="token operator" >=</span> sources<span class="token punctuation" >[</span>i<span class="token punctuation" >]</span><span class="token punctuation" >.</span><span class="token function" >getAttribute</span><span class="token punctuation" >(</span><span class="token string" >'data-orig'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
        <span class="token keyword keyword-if" >if</span> <span class="token punctuation" >(</span>orig<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
          sources<span class="token punctuation" >[</span>i<span class="token punctuation" >]</span><span class="token punctuation" >.</span><span class="token function" >setAttribute</span><span class="token punctuation" >(</span><span class="token string" >'src'</span><span class="token punctuation" >,</span> orig<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
        <span class="token punctuation" >}</span>
        sources<span class="token punctuation" >[</span>i<span class="token punctuation" >]</span><span class="token punctuation" >.</span><span class="token function" >setAttribute</span><span class="token punctuation" >(</span><span class="token string" >'data-orig'</span><span class="token punctuation" >,</span><span class="token string" >''</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
      <span class="token punctuation" >}</span>
      <span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span><span class="token function" >load</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
      <span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span><span class="token function" >play</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>
</span><span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>script</span><span class="token punctuation" >></span></span>
</code></pre>
<p>Again, <a href="http://media.24ways.org/2012/mclellan/examples/3.html">view the example</a> to see the bumper play, followed by our spectacular main feature. (That’s my cat, Widget. His interests include sleeping and internet marketing.)</p>
<h2>Tidying things up</h2>
<p>The final thing to do is add our closing bumper after the main video has played. This involves the following changes:</p>
<ol>
<li>We need to keep track of whether the <code>src</code> has been changed, so we only play the video if it’s changed. I’ve added the <code>modified</code> variable to track this, and it stops us getting into a situation where the video just loops forever.</li>
<li>Add an <code>else</code> to the event listener, for when the <code>orig</code> is false (so the main feature has been playing) to load in the end bumper. We also check that we’re not already playing the end bumper. Because looping.</li>
</ol>
<pre><code class="language-html"><span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>script</span><span class="token punctuation" >></span></span><span class="token script language-javascript" >
  <span class="token keyword keyword-var" >var</span> videos<span class="token punctuation" >,</span> sources<span class="token punctuation" >,</span> i<span class="token punctuation" >,</span> l<span class="token punctuation" >,</span> orig<span class="token punctuation" >,</span> current<span class="token punctuation" >,</span> modified<span class="token punctuation" >;</span>
  sources <span class="token operator" >=</span> document<span class="token punctuation" >.</span><span class="token function" >getElementsByTagName</span><span class="token punctuation" >(</span><span class="token string" >'source'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

  <span class="token keyword keyword-for" >for</span><span class="token punctuation" >(</span>i<span class="token operator" >=</span><span class="token number" >0</span><span class="token punctuation" >,</span> l<span class="token operator" >=</span>sources<span class="token punctuation" >.</span>length<span class="token punctuation" >;</span> i<span class="token operator" >&lt;</span>l<span class="token punctuation" >;</span> i<span class="token operator" >++</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    orig <span class="token operator" >=</span> sources<span class="token punctuation" >[</span>i<span class="token punctuation" >]</span><span class="token punctuation" >.</span><span class="token function" >getAttribute</span><span class="token punctuation" >(</span><span class="token string" >'src'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
    sources<span class="token punctuation" >[</span>i<span class="token punctuation" >]</span><span class="token punctuation" >.</span><span class="token function" >setAttribute</span><span class="token punctuation" >(</span><span class="token string" >'data-orig'</span><span class="token punctuation" >,</span> orig<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
    sources<span class="token punctuation" >[</span>i<span class="token punctuation" >]</span><span class="token punctuation" >.</span><span class="token function" >setAttribute</span><span class="token punctuation" >(</span><span class="token string" >'src'</span><span class="token punctuation" >,</span> orig<span class="token punctuation" >.</span><span class="token function" >replace</span><span class="token punctuation" >(</span><span class="token regex" >/(w+).(w+)/</span><span class="token punctuation" >,</span> <span class="token string" >'bumper-in.$2'</span><span class="token punctuation" >)</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>

  videos <span class="token operator" >=</span> document<span class="token punctuation" >.</span><span class="token function" >getElementsByTagName</span><span class="token punctuation" >(</span><span class="token string" >'video'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

  <span class="token keyword keyword-for" >for</span><span class="token punctuation" >(</span>i<span class="token operator" >=</span><span class="token number" >0</span><span class="token punctuation" >,</span> l<span class="token operator" >=</span>videos<span class="token punctuation" >.</span>length<span class="token punctuation" >;</span> i<span class="token operator" >&lt;</span>l<span class="token punctuation" >;</span> i<span class="token operator" >++</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    videos<span class="token punctuation" >[</span>i<span class="token punctuation" >]</span><span class="token punctuation" >.</span><span class="token function" >load</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
    modified <span class="token operator" >=</span> <span class="token boolean" >false</span><span class="token punctuation" >;</span>

    videos<span class="token punctuation" >[</span>i<span class="token punctuation" >]</span><span class="token punctuation" >.</span><span class="token function" >addEventListener</span><span class="token punctuation" >(</span><span class="token string" >'ended'</span><span class="token punctuation" >,</span> <span class="token keyword keyword-function" >function</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >{</span>
      sources <span class="token operator" >=</span> <span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span><span class="token function" >getElementsByTagName</span><span class="token punctuation" >(</span><span class="token string" >'source'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

      <span class="token keyword keyword-for" >for</span><span class="token punctuation" >(</span>i<span class="token operator" >=</span><span class="token number" >0</span><span class="token punctuation" >,</span> l<span class="token operator" >=</span>sources<span class="token punctuation" >.</span>length<span class="token punctuation" >;</span> i<span class="token operator" >&lt;</span>l<span class="token punctuation" >;</span> i<span class="token operator" >++</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
        orig <span class="token operator" >=</span> sources<span class="token punctuation" >[</span>i<span class="token punctuation" >]</span><span class="token punctuation" >.</span><span class="token function" >getAttribute</span><span class="token punctuation" >(</span><span class="token string" >'data-orig'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
        <span class="token keyword keyword-if" >if</span> <span class="token punctuation" >(</span>orig<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
          sources<span class="token punctuation" >[</span>i<span class="token punctuation" >]</span><span class="token punctuation" >.</span><span class="token function" >setAttribute</span><span class="token punctuation" >(</span><span class="token string" >'src'</span><span class="token punctuation" >,</span> orig<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
          modified <span class="token operator" >=</span> <span class="token boolean" >true</span><span class="token punctuation" >;</span>
        <span class="token punctuation" >}</span> <span class="token keyword keyword-else" >else</span> <span class="token punctuation" >{</span>
          current <span class="token operator" >=</span> sources<span class="token punctuation" >[</span>i<span class="token punctuation" >]</span><span class="token punctuation" >.</span><span class="token function" >getAttribute</span><span class="token punctuation" >(</span><span class="token string" >'src'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
          <span class="token keyword keyword-if" >if</span> <span class="token punctuation" >(</span>current<span class="token punctuation" >.</span><span class="token function" >indexOf</span><span class="token punctuation" >(</span><span class="token string" >'bumper-out'</span><span class="token punctuation" >)</span><span class="token operator" >==</span><span class="token operator" >-</span><span class="token number" >1</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
            sources<span class="token punctuation" >[</span>i<span class="token punctuation" >]</span><span class="token punctuation" >.</span><span class="token function" >setAttribute</span><span class="token punctuation" >(</span><span class="token string" >'src'</span><span class="token punctuation" >,</span> current<span class="token punctuation" >.</span><span class="token function" >replace</span><span class="token punctuation" >(</span><span class="token regex" >/([w]+).(w+)/</span><span class="token punctuation" >,</span> <span class="token string" >'bumper-out.$2'</span><span class="token punctuation" >)</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
            modified <span class="token operator" >=</span> <span class="token boolean" >true</span><span class="token punctuation" >;</span>
          <span class="token punctuation" >}</span> <span class="token keyword keyword-else" >else</span> <span class="token punctuation" >{</span>
            <span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span><span class="token function" >pause</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
            modified <span class="token operator" >=</span> <span class="token boolean" >false</span><span class="token punctuation" >;</span>
          <span class="token punctuation" >}</span>
        <span class="token punctuation" >}</span>
        sources<span class="token punctuation" >[</span>i<span class="token punctuation" >]</span><span class="token punctuation" >.</span><span class="token function" >setAttribute</span><span class="token punctuation" >(</span><span class="token string" >'data-orig'</span><span class="token punctuation" >,</span><span class="token string" >''</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
      <span class="token punctuation" >}</span>

      <span class="token keyword keyword-if" >if</span> <span class="token punctuation" >(</span>modified<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
        <span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span><span class="token function" >load</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
        <span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span><span class="token function" >play</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
      <span class="token punctuation" >}</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>
</span><span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>script</span><span class="token punctuation" >></span></span>
</code></pre>
<p>Yo ho ho, that’s a lot of JavaScript. <a href="http://media.24ways.org/2012/mclellan/examples/4.html">See it in action</a> – you should get a bumper, the cat video, and an end bumper.</p>
<p>Of course, this code works fine for demonstrating the principle, but it’s very procedural. Nothing wrong with that, but to do something similar in production, you’d probably want to make the code more modular to ease maintainability. Besides, you may want to use a framework, rather than basic JavaScript.</p>
<h2>The end credits</h2>
<p>One really important principle here is that of <strong>progressive enhancement</strong>. If the browser doesn’t support JavaScript, the user won’t see your bumper, but they will get the main video. If the browser supports JavaScript but doesn’t allow you to modify the <code>src</code> (as was the case with older versions of iOS), the user won’t see your bumper, but they will get the main video.</p>
<p>If a search engine or social media bot grabs your page and looks for content, they won’t see your bumper, but they will get the main video – which is absolutely what you want.</p>
<p>This means that if the bumper is absolutely crucial, you may still need to cook it into the video. However, for many applications, running it dynamically can work quite well.</p>
<p>As always, it comes down to three things:</p>
<ol>
<li>Measure your audience: know how people access your site</li>
<li>Test the solution: make sure it works for your audience</li>
<li>Plan for failure: it’s the web and that’s how things work 'round these parts</li>
</ol>
<p>But most of all <strong>play around with it, have fun and build something awesome</strong>.</p>


  </div>

  <section class="c-section" id="author">
  <header class="c-section__header">
    <h1 class="c-section__title">About the author</h1>
  </header>
  <div class="c-section__main">
      <p>Drew McLellan is lead developer on your favourite content management systems, <a href="https://grabaperch.com/">Perch and Perch Runway</a>. He is Director and Senior Developer at edgeofmyseat.com in Bristol, England, and is formerly Group Lead at the Web Standards Project. When not publishing 24 ways, Drew keeps a <a href="http://allinthehead.com/">personal site</a> covering web development issues and themes, <a href="http://flickr.com/drewm/">takes photos</a>, <a href="http://twitter.com/drewm">tweets a lot</a> and tries to stay upright on his bicycle.</p>
<p><a class="c-continue" href="/authors/drewmclellan/">More articles by Drew</a></p>
</div>
</section>


  <section class="c-section c-section--sponsor" id="sponsor">
  <header class="c-section__header">
    <h1 class="c-section__title">Brought to you by</h1>
  </header>
  <div class="c-section__main"><a class="c-promo" href="http://grabaperch.com/?ref=24w01">
  <img class="c-promo__image" src="/assets/images/logo-perch.png" alt="Perch - A really little CMS" width="152" height="64"/>
  <p class="c-promo__message">The easiest way to publish <strong>fast, flexible HTML5 websites</strong> your clients will love.</p>
  <p class="c-promo__url">grabaperch.com</p>
</a>
</div>
</section>


  <section class="c-section" id="comments">
  <header class="c-section__header">
    <h1 class="c-section__title">Comments</h1>
  </header>
  <div class="c-section__main">
      <p><a class="c-continue" href="/YYYY/article-slug/comments" data-replace data-interaction data-target="#comments">View 11 readers’ comments</a></p>
</div>
</section>


  <section class="c-section" id="related">
  <header class="c-section__header">
    <h1 class="c-section__title">Related articles</h1>
  </header>
  <div class="c-section__main"><ul class="summary-list">

  <li class="summary-list__item">
    <article class="c-summary h-entry ">
  <header class="c-summary__header">
    <h1 class="c-summary__title p-name">
      <a class="u-url" rel="bookmark" href="/2015/grid-flexbox-box-alignment-our-new-system-for-layout/">Grid, Flexbox, Box Alignment: Our New System for Layout</a>
    </h1>
    <p class="c-summary__meta">
      <time class="dt-published" datetime="2010-12-15T00:00:00-00:00">
        15
        <span>Dec 2010</span>
      </time>
      <a class="c-summary__comments" href="/2015/grid-flexbox-box-alignment-our-new-system-for-layout/#comments">6 comments</a>
    </p>
  </header>
  <div class="c-summary__main">
    <p class="p-summary"><a href="https://rachelandrew.co.uk/">Rachel Andrew</a> unwraps the new paradigms of web layout, comparing their features and showing how they can free us from grid-based, <code>div</code>-infested frameworks. Beautifully wrapped boxes look lovely under the Christmas tree, but we need to think and break out of them.
</p>
    <a class="c-summary__link" href="/2015/grid-flexbox-box-alignment-our-new-system-for-layout/">Impress your friends with &#8216;Grid, Flexbox, Box Alignment: Our New System for Layout&#8217;</a>
  </div>
  <footer class="c-summary__footer">
    <p class="c-summary__author p-author h-card">
      <a class="u-url" href="/authors/rachelandrew/"><img class="u-photo" src="http://media.24ways.org/authors/rachelandrew160.jpg" alt=""/><span class="p-name">rachelandrew</span></a>
    </p>
  </footer>
</article>

  </li>

  <li class="summary-list__item">
    <article class="c-summary h-entry ">
  <header class="c-summary__header">
    <h1 class="c-summary__title p-name">
      <a class="u-url" rel="bookmark" href="/2010/real-animation-using-javascript-css3-and-html5-video/">Real Animation Using JavaScript, CSS3, and HTML5 Video</a>
    </h1>
    <p class="c-summary__meta">
      <time class="dt-published" datetime="2010-12-15T00:00:00-00:00">
        15
        <span>Dec 2010</span>
      </time>
      <a class="c-summary__comments" href="/2010/real-animation-using-javascript-css3-and-html5-video/#comments">11 comments</a>
    </p>
  </header>
  <div class="c-summary__main">
    <p class="p-summary"><a href="http://danielmall.com/">Dan Mall</a> breathes life into web standards-based animation. By striving for more than just mechanical movement, we can create more believable animated effects to enhance our users’ experience.
</p>
    <a class="c-summary__link" href="/2010/real-animation-using-javascript-css3-and-html5-video/">Impress your friends with &#8216;Real Animation Using JavaScript, CSS3, and HTML5 Video&#8217;</a>
  </div>
  <footer class="c-summary__footer">
    <p class="c-summary__author p-author h-card">
      <a class="u-url" href="/authors/danmall/"><img class="u-photo" src="http://media.24ways.org/authors/danmall160.jpg" alt=""/><span class="p-name">danmall</span></a>
    </p>
  </footer>
</article>

  </li>

</ul>
</div>
</section>

</article>

</main>

<nav class="c-navigation" id="menu">
  <h1 class="u-hidden">Browse 24 ways</h1>
  
<div class="c-traverse-nav">
  
  <a class="c-traverse-nav__item" rel="prev" href="/2015/how-tabs-should-work/" data-sequence-title="How Tabs Should Work">
    <span class="c-traverse-nav__icon"><svg width="48" height="48" viewBox="0 0 240 240">
  <path d="M155 35l-85 85 85 85 7-7-78-78 78-78"/>
</svg>
</span>
    <span class="c-traverse-nav__label">Previous article</span>
  </a>
  
  
  <a class="c-traverse-nav__item" rel="next" href="/2015/solve-the-hard-problems/" data-sequence-title="Solve the Hard Problems">
    <span class="c-traverse-nav__icon"><svg width="48" height="48" viewBox="0 0 240 240">
  <path d="M170 120l-85 85-7-7 78-78-78-78 7-7"/>
</svg>
</span>
    <span class="c-traverse-nav__label">Next article</span>
  </a>
  
</div>


  <ul class="c-topics-nav">

  <li class="c-topics-nav__item">
    <a href="/topics/business/">
      <svg role="img" width="48" height="48" viewBox="0 0 240 240">
  <path d="M20 220c-11 0-20-9-20-20V70c0-11 9-20 20-20h60V35c0-10 5-15 15-15h50c10 0 15 5 15 15v15h60c11 0 20 9 20 20v130c0 11-9 20-20 20H20zm0-160c-5.5 0-10 4.5-10 10v130c0 5.5 4.5 10 10 10h200c5.5 0 10-4.5 10-10V70c0-5.5-4.5-10-10-10H20zm130-10V35c0-3-2-5-5-5H95c-3 0-5 2-5 5v15h60zM30 100V90h180v10H30zm0 40v-10h180v10H30zm0 40v-10h180v10H30z"/>
</svg>

      Business
    </a>
  </li>

  <li class="c-topics-nav__item">
    <a href="/topics/code/">
      <svg role="img" width="48" height="48" viewBox="0 0 240 240">
  <path transform="rotate(45 120 120)" d="M115 100H70.5C63 85 47.5 75 30 75 8.5 75-9.5 90-14 110h29l10 10-10 10h-29c4.5 20 22.5 35 44 35 17.5 0 33-10 40.5-25h99.5c7.5 15 22.5 25 40.5 25 21.5 0 39.5-15 44-35h-29l-10-10 10-10h29c-4.5-20-22.5-35-44-35-17.5 0-33 10-40.5 25H125V30h10v-50h-30v50h10v70zm123.5 40c-6.5 9-17 15-28.5 15-16 0-29-10.5-33.5-25H63.5C59 144.5 46 155 30 155c-12 0-22.5-6-28.5-15H20l20-20-20-20H1.5C7.5 91 18 85 30 85c16 0 29 10.5 33.5 25h113c4.5-14.5 17.5-25 33.5-25 12 0 23 6 29 15h-19l-20 20 20 20h19zM115-10h10v30h-10v-30zM99.5 240v-50h-10v-10h25v-40h10v40h25v10H140v50c0 10-7.5 20-20 20-12.5 0-20-10-20.5-20zm11 0c0 7.5 5 10 10 10s10-2.5 10-10v-50h-20v50z"/>
</svg>

      Code
    </a>
  </li>

  <li class="c-topics-nav__item">
    <a href="/topics/content/">
      <svg role="img" width="48" height="48" viewBox="0 0 240 240">
  <path d="M102.5 240l-1.5-2c-2.5-3.5-61-88-61-128s40.5-64 42.5-65L50 0h140l-32.5 45S200 70 200 110s-58.5 124.5-61 128l-1.5 2h-35zm30-10c9-13 57.5-85.5 57.5-120 0-33-35-56-41.5-60H91.5C85 54 50 77 50 110c0 34.5 48.5 106.5 57.5 120h25zM115 129.5c-11.5-2-20-12.5-20-24.5 0-14 11-25 25-25s25 11 25 25c0 12-8.5 22-20 24.5V230h-10V129.5zm5-39.5c-8 0-15 6.5-15 15s6.5 15 15 15 15-6.5 15-15-6.5-15-15-15zM92.5 40h55L170 10H70l22.5 30z"/>
</svg>

      Content
    </a>
  </li>

  <li class="c-topics-nav__item">
    <a href="/topics/design/">
      <svg role="img" width="48" height="48" viewBox="0 0 240 240">
  <path fill-rule="evenodd" d="M140 0h80v240h-80V0zm70 10h-60v30h20v10h-20V70h20v10h-20v20h20v10h-20v20h20v10h-20v20h20v10h-20v20h20v10h-20V230h60V10zM45 230c-14 0-25-11-25-25V60c0-1 35-55 35-55s35 54 35 55v145c0 14-11 25-25 25H45zm-15-25c0 8 7 15 15 15h20c8 0 15-7 15-15v-5H30v5zm0-25v10h50v-10H30zm0-106c0-2 2-4 4-4h2c2 0 4 2 4 4v96H30V74zm20 0c0-2 2-4 4-4h2c2 0 4 2 4 4v96H50V74zm20 0c0-2 2-4 4-4h2c2 0 4 2 4 4v96H70V74zM30.5 60.5S39 58 45 63.5c6-4.5 14-4.5 20 0 6-5.5 14.5-3 14.5-3L69 45H41L30.5 60.5zm24.5-38L47.5 35h15L55 22.5z"/>
</svg>

      Design
    </a>
  </li>

  <li class="c-topics-nav__item">
    <a href="/topics/process/">
      <svg role="img" width="48" height="48" viewBox="0 0 240 240">
  <path d="M210 116v4c0 49.5-40.5 90-90 90-29 0-55-14-71.5-35l7-7c14.5 19.5 38 32 64.5 32 44 0 80-36 80-80v-3.5l-15.5 16-7.5-7.5 28.5-28.5L234 125l-7.5 7.5L210 116zm-180 8v-4c0-49.5 40.5-90 90-90 29 0 54.5 13.5 71 35l-7 7C169 52.5 146 40 120 40c-44 0-80 36-80 80v5l17-17 7 7-28.5 28.5L7 115l7-7 16 16z"/>
</svg>

      Process
    </a>
  </li>

  <li class="c-topics-nav__item">
    <a href="/topics/ux/">
      <svg role="img" width="48" height="48" viewBox="0 0 240 240">
  <path d="M220 240H20c-11 0-20-9-20-20V20C0 9 9 0 20 0h200c11 0 20 9 20 20v200c0 11-9 20-20 20zM20 10c-5 0-10 4-10 10v200c0 5 4 10 10 10h200c5 0 10-4 10-10V20c0-5-4-10-10-10H20zm150 200c-11 0-20-9-20-20s9-20 20-20 20 9 20 20-9 20-20 20zm0-30c-5 0-10 4-10 10s4 10 10 10 10-4 10-10-4-10-10-10zm-50 30c-11 0-20-9-20-20s9-20 20-20 20 9 20 20-9 20-20 20zm0-30c-5 0-10 4-10 10s4 10 10 10 10-4 10-10-4-10-10-10zm-50 30c-11 0-20-9-20-20s9-20 20-20 20 9 20 20-9 20-20 20zm0-30c-5 0-10 4-10 10s4 10 10 10 10-4 10-10-4-10-10-10zm45-30V80h10v70h-10zm0-100V30h10v20h-10zM65 80V30h10v50H65zm0 70v-40h10v40H65zm100 0v-20h10v20h-10zm0-50V30h10v70h-10zM50 110V80h40v30H50zm10-10h20V90H60v10zm90 30v-30h40v30h-40zm-50-50V50h40v30h-40zm10-10h20V60h-20v10zm50 50h20v-10h-20v10z"/>
</svg>

      UX
    </a>
  </li>

</ul>

  <form class="c-search" role="search" id="search" action="/pages/search/">
  <fieldset class="c-field c-field--search">
    <legend class="u-hidden">Search 24 ways</legend>
    <label class="c-field__label" for="q">Keywords</label>
    <input class="c-field__input" type="search" id="q" name="q" placeholder="e.g. CSS, Design, Research&#8230;"/>
    <button class="c-field__button" type="submit"><svg class="icon--search" width="48" height="48" viewBox="0 0 240 240" role="img" aria-labelledby="icon--search__title">
  <title id="icon--search__title">Search</title>
  <path role="presentation" d="M148 140c7-8 11-19 11-31 0-28-22-50-50-50s-50 22-50 50 22 50 50 50c12 0 24-4 32-12l35 35 7-7-36-36zm-39 9c-22 0-40-18-40-40s18-40 40-40 40 18 40 40-18 40-40 40z"/>
</svg>
</button>
  </fieldset>
</form>

  <ul class="c-site-nav">
  <li class="c-site-nav__item"><a href="/archives/">Archives</a></li>
  <li class="c-site-nav__item"><a href="/topics/">Topics</a></li>
  <li class="c-site-nav__item"><a href="/authors/">Authors</a></li>
  <li class="c-site-nav__item"><a href="/about/">About</a></li>
</ul>

</nav>

<footer class="c-contentinfo">
  <p class="c-contentinfo__copyright">
    <small>&#169; 2005-2016 24 ways and our authors. <a href="/about/#colophon">Colophon</a></small>
  </p>
  <p class="c-contentinfo__social">
    <a href="https://feeds.feedburner.com/24ways" rel="alternate">Grab our RSS feed</a>
    <a href="https://twitter.com/24ways" rel="me">Follow us on Twitter</a>
  </p>
</footer>


  </body>

  <script src="/assets/scripts/vendor/madrobby/zepto/zepto.js"></script>
  <script>jQuery = Zepto;</script>
  <script src="/assets/scripts/vendor/adactio/progresponsive/progresponsive.js"></script>
  <script src="/assets/scripts/vendor/filamentgroup/ajaxinclude/ajaxinclude.js"></script>
  <script>
    // AJAX include comments
    $("a[data-interaction]").addClass("c-continue-ajax");
    $("a[data-interaction]").bind( "click", function(e) {
      e.preventDefault();
      $("#comments").addClass("c-section-loading");
      $(this).removeAttr("data-interaction").ajaxInclude();
    });

    // Corner animation
    var cornerOver = function(){
      this.className = this.className.replace(' js-mouseout', '');
    };
    var cornerOut = function(){
      this.className += ' js-mouseout';
    };
    var corners = document.querySelectorAll('.c-summary');
    for (var i = corners.length - 1; i >= 0; i--) {
      corners[i].addEventListener('js-mouseover', cornerOver, false);
      corners[i].addEventListener('js-mouseout', cornerOut, false);
    };

    // Equal height grid cells
    // http://css-tricks.com/equal-height-blocks-in-rows/
    if (window.innerWidth > 640) {
      equalheight = function(container){
        var currentTallest = 0,
          currentRowStart = 0,
          rowDivs = new Array(),
          $el,
          topPosition = 0;

        $(container).each(function() {
          $el = $(this);
          $($el).height('auto')
          topPostion = $el.position().top;

          if (currentRowStart != topPostion) {
            for (currentDiv = 0 ; currentDiv < rowDivs.length ; currentDiv++) {
              rowDivs[currentDiv].height(currentTallest);
            }
            rowDivs.length = 0; // empty the array
            currentRowStart = topPostion;
            currentTallest = $el.height();
            rowDivs.push($el);
          } else {
            rowDivs.push($el);
            currentTallest = (currentTallest < $el.height()) ? ($el.height()) : (currentTallest);
          }
          for (currentDiv = 0 ; currentDiv < rowDivs.length ; currentDiv++) {
            rowDivs[currentDiv].height(currentTallest);
          }
        });
      }

      $(document).ready(function() {
        equalheight('.c-summary-list .c-summary');
      });

      $(window).resize(function(){
        equalheight('.c-summary-list .c-summary');
      });
    }

    // Show back to top link when we've scrolled down the page
    if (window.innerWidth > 504) {
      $('.c-navigation').append('<a class="c-top-nav" href="#top">Return to the top of this page</a>');
      $(function () {
        $(window).scroll(function () {
          if ($(this).scrollTop() > 400) {
            $('.c-top-nav').animate({ opacity: 1 }, 500, 'ease-in')
          } else {
            $('.c-top-nav').animate({ opacity: 0 }, 500, 'ease-out')
          }
        });

        // http://austinpray.com/blog/zepto-js-smooth-vertical-scrolling/
        function smoothScroll(el, to, duration) {
          if (duration < 0) {
            return;
          }
          var difference = to - $(window).scrollTop();
          var perTick = difference / duration * 10;
          this.scrollToTimerCache = setTimeout(function() {
            if (!isNaN(parseInt(perTick, 10))) {
              window.scrollTo(0, $(window).scrollTop() + perTick);
              smoothScroll(el, to, duration - 10);
            }
          }.bind(this), 10);
        }

        $('.c-top-nav').on('click', function(e) {
          e.preventDefault();
          smoothScroll($(window), $($(e.currentTarget).attr('href')).offset().top, 500);
        });
      });
    }
  </script>
</html>

